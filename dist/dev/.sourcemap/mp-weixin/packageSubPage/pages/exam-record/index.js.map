{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/packageSubPage/pages/exam-record/index.vue?2209","webpack:///./src/packageSubPage/pages/exam-record/index.vue?6a21","webpack:///./src/packageSubPage/pages/exam-record/index.vue?809e","webpack:///./src/packageSubPage/pages/exam-record/index.vue?a063","uni-app:///src/packageSubPage/pages/exam-record/index.vue","webpack:///./src/packageSubPage/pages/exam-record/index.vue?716d"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","l0","_self","_c","Object","keys","parsedExamRecordResults","$mp","data","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBAAmB,8BACnB,sBACA,+D,mDACAA,EAAWC,a;;;;2DCHX,4SACIC,EADJ,2HASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,6CACZ,aAAAF,E;;;;2GCvBf,03B;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVC,OAAOC,KAAKR,EAAIS,0BACzBT,EAAIU,IAAIC,KAAOJ,OAAOK,OACpB,GACA,CACEC,MAAO,CACLT,GAAIA,MAKRU,GAAmB,EACnBC,EAAkB,GACtBhB,EAAOiB,eAAgB,G;;;;2DCjBvB,whBAAie,eAAG,G;;;;yMC6Bpe,iCACA,4CACA,sCACA,8CACA,mBACA,4BAEA,mCACA,gEAEA,GADA,kBACA,kCACA,0C,0uDAGA,CACA,4DACA,KAFA,WAGA,OACA,WACA,aACA,CACA,aACA,kBACA,mDACA,0CAEA,CACA,aACA,kBACA,uDACA,8CAGA,eACA,2BACA,yBACA,gBACA,gBACA,sBACA,aACA,aACA,sFAEA,6CACA,eACA,wDAGA,iBACA,eACA,6CAFA,IAIA,kBAJA,WAMA,uBACA,8DAGA,QA5CA,WA6CA,aAEA,OA/CA,SA+CA,+HAEA,WAFA,uBAGA,aACA,gDAJA,UAKA,cALA,OAMA,gBACA,aAPA,OAYA,wCACA,2BAbA,8CAgBA,OA/DA,WAgEA,6CACA,2BACA,qBACA,+CAGA,OAtEA,WAuEA,mBAEA,QAzEA,WAyEA,yHACA,aAEA,iBACA,mBACA,0CACA,gCACA,8BACA,2CAGA,gDAXA,8CAaA,OACA,mBACA,oBACA,wGACA,qGAGA,qCACA,uBAGA,aACA,UAGA,kBArGA,SAqGA,GACA,OACA,gCACA,8BACA,0CAGA,SACA,KADA,WACA,yJAEA,gFAFA,OAEA,EAFA,OAGA,4CACA,gEACA,iGACA,0BANA,qDAQA,oBARA,6DAWA,QAZA,WAaA,cACA,0C;;;;2DCrKA,ywBAAktB,eAAG,G","file":"packageSubPage/pages/exam-record/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './packageSubPage/pages/exam-record/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=37a81982&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=37a81982&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37a81982\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"packageSubPage/pages/exam-record/index.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=37a81982&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = Object.keys(_vm.parsedExamRecordResults)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"entry\">\r\n\t\t\t<index-entry-item v-for=\"(item, index) in entryConfig\" :title=\"item.title\" :subTitle=\"item.subTitle\" :iconUrl=\"item.iconUrl\"\r\n\t\t\t :navUrl=\"item.navUrl\" :key=\"index\"></index-entry-item>\r\n\t\t</view>\n\t\t\t\t\n\t\t<uniLoadMore v-if=\"loadMoreHide\" class=\"load-more\" :status=\"loadMoreStatus\" :contentText=\"contentText\" />\n\t\t<div v-show=\"!loadMoreHide\">\n\t\t\t<view class=\"bottom-container\">\n\t\t\t\t<view class=\"button\" @click=\"analyze\">\n\t\t\t\t\t<image class=\"icon\" :src=\"chartIcon\"></image>\n\t\t\t\t\t<span>定制我的图表分析</span>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<div v-for=\"(resultKey, index) in Object.keys(parsedExamRecordResults)\" :key=\"index\">\n\t\t\t\t<div class=\"chart-container\">\n\t\t\t\t\t<div class=\"chart-header\">\n\t\t\t\t\t\t<span class=\"chart-title\">{{parsedExamRecordResults[resultKey].title}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<echartElement :item=\"parsedExamRecordResults[resultKey]\" :chartConfig=\"chartConfig\" :canvasStyle=\"canvasStyle\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport indexEntryItem from '@/packageSubPage/pages/exam-record/index-entry-item';\r\n\timport { PAGES } from '@/common/constants';\n\timport { EXAM_RECORD_RESULT_GETTER_GET_ALL, EXAM_RECORD_RESULT_MUTATION_UPDATE } from '@/store/examRecordResultStore';\n\timport { EXAM_RECORD_MUTATION_UPDATE } from '@/store/examRecordStore';\r\n\timport { examRecordResultsBySelf } from '@/common/apis/examRecordResult';\r\n\timport { mapState } from 'vuex';\n\timport { getStaticResource } from '@/common/util';\n\timport echartElement from '@/packageSubPage/components/echart-element';\r\n\timport { addVisitSelf } from '@/common/apis/visit';\r\n\timport { parseExamRecordResults } from '@/packageSubPage/common/helpers/examRecordHelper';\n\timport Vue from 'vue';\n\timport Strings from '@/common/strings';\n\timport { login } from '@/common/helpers/authHelper';\n\timport uniLoadMore from \"@/components/uni-load-more\";\n\r\n\texport default {\n\t\tcomponents: {echartElement, indexEntryItem, uniLoadMore},\r\n\t\tdata() {\r\n\t\t\treturn {\n\t\t\t\tloading: true,\r\n\t\t\t\tentryConfig: [\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '添加记录',\r\n\t\t\t\t\t\tsubTitle: '完善记录动态',\r\n\t\t\t\t\t\ticonUrl: getStaticResource('exam-record-add'),\r\n\t\t\t\t\t\tnavUrl: PAGES.EXAM_RECORD_ADD_LIST.path\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttitle: '查看记录',\r\n\t\t\t\t\t\tsubTitle: '查看历史记录',\r\n\t\t\t\t\t\ticonUrl: getStaticResource('exam-record-history'),\r\n\t\t\t\t\t\tnavUrl: PAGES.EXAM_RECORD_RESULT_LIST.path\r\n\t\t\t\t\t}\r\n\t\t\t\t],\n\t\t\t\tquestionMap: {},\n\t\t\t\tparsedExamRecordResults: {},\n\t\t\t\tloadMoreStatus: 'loading',\n\t\t\t\tloadMoreHide: false,\n\t\t\t\tloadNewChart: false,\n\t\t\t\tnewExamRecordAdded: false,\n\t\t\t\thasHidden: false,\n\t\t\t\tcontentText: {\n\t\t\t\t\tcontentdown: \"还没有健康记录，快来添加吧~\", contentrefresh: \"正在加载...\", contentnomore: \"还没有健康记录，快来添加吧~\",\n\t\t\t\t},\n\t\t\t\tcanvasStyle: { width: '678rpx', height: '444rpx' },\n\t\t\t\tchartConfig: { },\n\t\t\t\tchartIcon: getStaticResource('metro-chart-dots'),\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\n\t\t\t...mapState({\r\n\t\t\t\tself: state => state.userStore.self,\r\n\t\t\t}),\n\t\t\texamRecordResults() {\n\t\t\t\t// 需要在onload中初始化数据，才能让图表正确渲染，因此此处等待this.loading被赋值再拉取数据\n\t\t\t\tif(this.loading) return [];\n\t\t\t\treturn this.$store.getters[EXAM_RECORD_RESULT_GETTER_GET_ALL]();\n\t\t\t},\n\t\t},\n\t\tmounted() {\n\t\t\tthis.load();\n\t\t},\r\n\t\tasync onLoad(option) {\n\t\t\t\n\t\t\tif (!this.self._id) {\n\t\t\t\tthis.loading = true;\n\t\t\t\tuni.showLoading({ title: Strings.GLOBAL.LOADING });\n\t\t\t\tawait login(this);\n\t\t\t\tuni.hideLoading();\n\t\t\t\tthis.loading = false;\n\t\t\t}\n\t\t\t\n\t\t\t// 如果该页面是从添加病历页面返回打开，那么如果此时需要新渲染一种chart，则必须彻底重新加载该页面，否则新出现的chart显示空白。\n\t\t\t// 该问题也可以通过在chart-element.vue中的loadCharts()方法中设置延迟加载来解决。\n\t\t\tuni.$on('newExamRecordAdded', (data) => {\n\t\t\t\tthis.newExamRecordAdded = true;\n\t\t\t});\n\t\t},\n\t\tonShow() {\n\t\t\tif(this.newExamRecordAdded && this.loadNewChart) {\n\t\t\t\tthis.newExamRecordAdded = false;\n\t\t\t\tthis.loadNewChart = false;\n\t\t\t\tuni.redirectTo({ url: PAGES.EXAM_RECORD.path });\n\t\t\t}\n\t\t},\n\t\tonHide() {\n\t\t\tthis.hasHidden = true;\n\t\t},\n\t\tasync onReady() {\n\t\t\tthis.loading = false;\n\t\t\t\n\t\t\tuni.showShareMenu({\n\t\t\t\twithShareTicket: true,\n\t\t\t\tmenus: ['shareAppMessage', 'shareTimeline'],\n\t\t\t\ttitle: PAGES.EXAM_RECORD.title,\n\t\t\t\tpath: PAGES.EXAM_RECORD.path,\n\t\t\t\tcontent: PAGES.EXAM_RECORD.description,\n\t\t\t});\n\t\t\n\t\t\taddVisitSelf(null, PAGES.EXAM_RECORD.ref);\n\t\t},\n\t\twatch: {\n\t\t\texamRecordResults: {\n\t\t\t\thandler: function(value) {\t\n\t\t\t\t\tthis.parsedExamRecordResults = Object.assign({}, parseExamRecordResults(this.examRecordResults)) || {};\n\t\t\t\t\tthis.loadMoreHide = !this.parsedExamRecordResults || Object.keys(this.parsedExamRecordResults).length <= 0;\n\t\t\t\t\t\n\t\t\t\t\t// 页面第一次渲染的时候不进行判定\n\t\t\t\t\tif(this.hasHidden && !this.loadNewChart) {\n\t\t\t\t\t\tthis.loadNewChart = true;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\timmediate: true,\n\t\t\t\tdeep: true\n\t\t\t},\n\t\t},\n\t\tonShareAppMessage(res) {\n\t\t\treturn {\n\t\t\t\ttitle: PAGES.EXAM_RECORD.title,\n\t\t\t\tpath: PAGES.EXAM_RECORD.path,\n\t\t\t\tcontent: PAGES.EXAM_RECORD.description,\n\t\t\t}\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync load() {\n\t\t\t\ttry {\n\t\t\t\t\tlet result = await examRecordResultsBySelf(this.self._id, { skip: 0, limit: 1000, sort: { recordedAt: 1 } });\n\t\t\t\t\tresult = result && result.data && result.data.examRecordResultsBySelf;\n\t\t\t\t\tthis.$store.commit(EXAM_RECORD_RESULT_MUTATION_UPDATE, {items: result});\n\t\t\t\t\tthis.$store.commit(EXAM_RECORD_MUTATION_UPDATE, {items: result.map(r => r.examRecord)});\n\t\t\t\t\tthis.loadMoreStatus = 'nomore';\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tanalyze() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: PAGES.EXAM_RECORD_ANALYZE.path\n\t\t\t\t});\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\n\t\r\n\t.container {\r\n\t\tbackground: #F7F8FB;\r\n\t\tdisplay: flex; \n\t\tposition: absolute; \n\t\tflex-direction: column;\n\t\twidth: 100%; \n\t\theight: auto;\n\t\tmin-height: 100%;\n\t\tbox-sizing: border-box;\n\t\toverflow: auto;\n\t\tpadding: 32rpx 36rpx 32rpx 36rpx;\r\n\t}\r\n\r\n\t.entry {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tflex-wrap: wrap;\r\n\t}\n\t\n\t.load-more {\n\t\twidth: 100%;\n\t\theight: 56rpx;\n\t\tmargin-right: 10rpx;\n\t\tcolor: #B2ACAC;\n\t}\r\n\r\n\t.chart-container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\twidth: 100%;\n\t\tflex: 1;\n\t\tbox-sizing: border-box;\r\n\t\tmargin: 0 0 32rpx 0;\n\t\tpadding: 32rpx 0;\n\t\tbackground-color: #FFFFFF;\n\t}\n\t\n\t.chart-header {\n\t\tpadding: 0 0 20rpx 24rpx;\n\t}\n\t\n\t.chart-title {\n\t\tcolor: #2E2E2E;\n\t\tfont-size: 28rpx;\n\t\tline-height: 40rpx;\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 18px;\r\n\t\tcolor: #888;\r\n\t\tfont-weight: bold;\r\n\t\tmargin: 20px 0 30px;\r\n\t}\n\t\n\t.bottom-container {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\tmargin: 24rpx 0 24rpx 0;\n\t}\n\t\n\t.button {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\theight: 92rpx;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tbackground: #7ED395;\n\t\tcolor: #FFFFFF;\n\t\tborder-radius: 14rpx;\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t}\n\t\n\t.icon {\n\t\theight: 28rpx;\n\t\twidth: 28rpx;\n\t\tmargin-right: 10rpx;\n\t}\r\n</style>\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=37a81982&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=37a81982&scoped=true&lang=css&\""],"sourceRoot":""}