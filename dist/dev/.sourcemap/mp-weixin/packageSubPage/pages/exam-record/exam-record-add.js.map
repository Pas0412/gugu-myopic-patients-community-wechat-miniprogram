{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/packageSubPage/pages/exam-record/exam-record-add.vue?4593","webpack:///./src/packageSubPage/pages/exam-record/exam-record-add.vue?04d1","webpack:///./src/packageSubPage/pages/exam-record/exam-record-add.vue?b475","webpack:///./src/packageSubPage/pages/exam-record/exam-record-add.vue?fd74","uni-app:///src/packageSubPage/pages/exam-record/exam-record-add.vue","webpack:///./src/packageSubPage/pages/exam-record/exam-record-add.vue?f111"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBAAmB,8BACnB,sBACA,yE,mDACAA,EAAWC,a;;;;2DCHX,0UACIC,EADJ,2HASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,uDACZ,aAAAF,E;;;;2GCvBf,o4B;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,kiBAA2e,eAAG,G;;;;yMCyC9e,sCACA,4CAMA,mBACA,mCAEA,GADA,sCACA,yCACA,iCAEA,GADA,0BACA,6CACA,8DAIA,mCACA,kC,29FAIA,CACA,+HACA,KAFA,WAGA,OACA,kBACA,wBACA,gBACA,kBACA,oBACA,mBACA,sBACA,gBACA,mBACA,qBACA,2BACA,sBACA,yBAEA,gCACA,kBACA,WAEA,yBACA,gBACA,mBACA,qBACA,2BACA,sBACA,yBAEA,gCACA,kBACA,qBACA,oBACA,WAEA,YACA,cACA,sBACA,iBACA,mBACA,6BACA,2BAEA,cACA,6BACA,eAEA,aACA,oBACA,eACA,uBACA,+BACA,uBACA,cACA,sBACA,iBACA,6BACA,sBAIA,yBACA,0CACA,WAFA,WAGA,6EAEA,iBALA,WAMA,2BAEA,CACA,wFAKA,OAJA,kBACA,0EACA,oCAEA,EAPA,gGAUA,WAjBA,WAkBA,mCAGA,OAnFA,SAmFA,+HACA,aACA,eACA,iCAGA,iCACA,6CAEA,WATA,iCASA,cATA,OAYA,sBACA,sEACA,sFACA,qBAIA,gBACA,aApBA,+CAsBA,QAzGA,WA0GA,iBACA,mBACA,0CACA,gCACA,8BACA,2CAGA,2FAEA,kBApHA,SAoHA,GACA,OACA,gCACA,8BACA,0CAGA,SACA,OADA,WACA,wIACA,aADA,6DAKA,aACA,eACA,iCAGA,EAVA,KAUA,2BACA,aACA,uBACA,8BACA,mBAEA,aAhBA,+BAiBA,MAjBA,WAkBA,sDAlBA,QAkBA,EAlBA,OAmBA,gCAnBA,0CAqBA,4BArBA,QAqBA,EArBA,OAsBA,6BAtBA,QAyBA,QACA,EADA,OACA,oBADA,IACA,YAEA,kGACA,+FAEA,2BAEA,IACA,aACA,kCACA,qCACA,oBACA,iBACA,kBACA,UACA,0BAEA,mBAEA,8BACA,uBACA,oBACA,UAIA,gBACA,aArDA,qDAuDA,oBAvDA,6DA0DA,SA3DA,WA2DA,WACA,qCAGA,OAFA,8BACA,8BACA,EAGA,SACA,OA6BA,OA5BA,0CAGA,mEAEA,kBACA,eACA,gCACA,gEACA,0BACA,MACA,kCACA,2DACA,0BACA,MACA,iDACA,kEACA,0BACA,MACA,QACA,MAIA,OADA,MACA,MAIA,GAEA,sBAlGA,SAkGA,SACA,sDACA,iDACA,kBACA,6BAEA,aAxGA,SAwGA,KACA,qDACA,kBACA,6BAEA,oBA7GA,SA6GA,GACA,uBACA,sDAEA,iBAjHA,SAiHA,GACA,wBAEA,kBApHA,SAoHA,GACA,wBAEA,YAvHA,SAuHA,GACA,wCAEA,kBA1HA,SA0HA,GACA,kCAEA,WA7HA,SA6HA,KACA,8CACA,OAEA,gBACA,kGAEA,2G;;;;2DC/TA,mxBAA4tB,eAAG,G","file":"packageSubPage/pages/exam-record/exam-record-add.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './packageSubPage/pages/exam-record/exam-record-add.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./exam-record-add.vue?vue&type=template&id=02d7bf40&scoped=true&\"\nvar renderjs\nimport script from \"./exam-record-add.vue?vue&type=script&lang=js&\"\nexport * from \"./exam-record-add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./exam-record-add.vue?vue&type=style&index=0&id=02d7bf40&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"02d7bf40\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"packageSubPage/pages/exam-record/exam-record-add.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./exam-record-add.vue?vue&type=template&id=02d7bf40&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./exam-record-add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./exam-record-add.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"root\">\n\t\t<uniPopup id=\"errorPopup\" ref=\"errorPopup\" type=\"message\">\n\t\t\t<uniPopupMessage type=\"error\" :message=\"errorMessage\" :duration=\"2000\"></uniPopupMessage>\n\t\t</uniPopup>\n\t\t<view class=\"form-container\">\r\n\t\t\t<scroll-view class=\"form\" :show-scrollbar=\"true\" :scroll-anchoring=\"true\">\n\t\t\t\t<view class=\"date\">\n\t\t\t\t\t<date-input :date=\"examRecordResult.recordedAt\" @open=\"onDatePickerOpen\" @confirm=\"onDatePickerConfirm\" \n\t\t\t\t\t\ttitle=\"检查日期\" @close=\"onDatePickerClose\" />\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"uni-form-item uni-column page\" v-for=\"(page, index) in examRecord.content\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"question\" v-for=\"(question, questionIndex) in page.elements\" :key=\"questionIndex\">\n\t\t\t\t\t\t<questionText :wrapperTitleStyle=\"wrapperTitleStyle\" :wrapperDescriptionStyle=\"wrapperDescriptionStyle\"\n\t\t\t\t\t\t\twrapperDescriptionPosition=\"bottom\" :question=\"question\" v-if=\"question.type === 'text'\"\n\t\t\t\t\t\t\t:inputStyle=\"inputStyle\" @change=\"onTextChange($event, question)\" :result=\"examRecordResult.result[question.name]\" />\r\n\t\t\t\t\t\t<matrixDynamic :wrapperTitleStyle=\"wrapperTitleStyle\" :wrapperDescriptionStyle=\"wrapperDescriptionStyle\"\r\n\t\t\t\t\t\t\twrapperDescriptionPosition=\"bottom\" :question=\"question\" v-if=\"question.type === 'matrixdynamic'\" \n\t\t\t\t\t\t\t:inputStyle=\"inputStyle\" :spliterStyle=\"spliterStyle\" :choiceStyle=\"choiceStyle\"\n\t\t\t\t\t\t\t@change=\"onMatrixdynamicChange($event, question)\" :result=\"examRecordResult.result[question.name]\" />\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<image-uploader title=\"上传报告单\" titleTips=\"(供临床医师参考)\" @change=\"screenshotsChange\" :previews=\"examRecordResult.screenshots\" />\n\t\t\t\t<view class=\"note\">\n\t\t\t\t\t<span class=\"note-text\">备注</span>\n\t\t\t\t\t<textarea class=\"note-input\" placeholder=\"请添加任意内容\" :value=\"examRecordResult.note || ''\" @input='onNoteInput' />\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\n\t\t</view>\n\t\t<view v-if=\"showSaveButton\" class=\"bottom-container\">\n\t\t\t<view class=\"button\" @click=\"finish\">保存记录</view>\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport matrixDynamic from '@/packageSubPage/components/questions/matrixdynamic';\r\n\timport questionText from '@/packageSubPage/components/questions/text';\r\n\timport DateInput from '@/packageSubPage/pages/exam-record/add/date-input';\r\n\timport Button from '@/components/button';\r\n\timport ImageUploader from '@/packageSubPage/pages/exam-record/add/image-uploader';\r\n\timport { EXAM_RECORD_GETTER_GET_ONE, EXAM_RECORD_MUTATION_UPDATE_ONE } from \"@/store/examRecordStore\";\r\n\timport { \n\t\tEXAM_RECORD_RESULT_GETTER_GET_ONE, \n\t\tEXAM_RECORD_RESULT_MUTATION_IN_PROGRESS_UPDATE_ONE,\n\t\tEXAM_RECORD_RESULT_GETTER_IN_PROGRESS_GET_ONE,\n\t\tEXAM_RECORD_RESULT_MUTATION_UPDATE_ONE\n\t} from \"@/store/examRecordResultStore\";\r\n\timport { mapState } from 'vuex';\r\n\timport Strings from '@/common/strings';\r\n\timport { examRecord } from '@/common/apis/examRecord';\r\n\timport { login } from '@/common/helpers/authHelper';\r\n\timport { PAGES, APP } from '@/common/constants';\r\n\timport { getStaticResource } from \"@/common/util\";\r\n\timport { addExamRecordResult, updateExamRecordResult } from \"@/common/apis/examRecordResult\";\r\n\timport { buildInitResult, VALIDATION_TYPE } from \"@/packageSubPage/common/helpers/questionHelper\";\r\n\timport uniPopup from '@/components/uni-popup/uni-popup';\r\n\timport uniPopupDialog from '@/components/uni-popup/uni-popup-dialog';\r\n\timport uniPopupMessage from '@/components/uni-popup/uni-popup-message';\r\n\timport { addVisitSelf } from \"@/common/apis/visit\";\n\timport { aliyunSignature } from '@/common/apis/aliyun';\r\n\timport { isQuestionPageResultValid } from \"@/packageSubPage/common/helpers/questionHelper\";\n\timport { objectMap } from '@/common/util';\n\r\n\texport default {\r\n\t\tcomponents: { uniPopup, uniPopupDialog, uniPopupMessage, ImageUploader, Button, matrixDynamic, questionText, DateInput },\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\texamRecordId: null,\r\n\t\t\t\texamRecordResultId: null,\r\n\t\t\t\terrorMessage: '',\n\t\t\t\tshowSaveButton: true,\n\t\t\t\timageUploadUrl: null,\n\t\t\t\twrapperTitleStyle: {\r\n\t\t\t\t\t'margin-bottom': '8px',\r\n\t\t\t\t\t'color': '#2E2E2E',\r\n\t\t\t\t\t'font-size': '16px',\r\n\t\t\t\t\t'line-height': '24px',\r\n\t\t\t\t\t'text-overflow': 'ellipsis',\r\n\t\t\t\t\t'display': '-webkit-box',\r\n\t\t\t\t\t'-webkit-line-clamp': '1',\r\n\t\t\t\t\t/* number of lines to show */\r\n\t\t\t\t\t'-webkit-box-orient': 'vertical',\r\n\t\t\t\t\t'overflow': 'hidden',\n\t\t\t\t\t'padding': 0,\r\n\t\t\t\t},\r\n\t\t\t\twrapperDescriptionStyle: {\r\n\t\t\t\t\t'color': '#979797',\r\n\t\t\t\t\t'font-size': '12px',\r\n\t\t\t\t\t'line-height': '17px',\r\n\t\t\t\t\t'text-overflow': 'ellipsis',\r\n\t\t\t\t\t'display': '-webkit-box',\r\n\t\t\t\t\t'-webkit-line-clamp': '2',\r\n\t\t\t\t\t/* number of lines to show */\r\n\t\t\t\t\t'-webkit-box-orient': 'vertical',\r\n\t\t\t\t\t'overflow': 'hidden',\r\n\t\t\t\t\t'text-align': 'right',\n\t\t\t\t\t'margin': '10px 0 0 0',\n\t\t\t\t\t'padding': 0,\r\n\t\t\t\t},\n\t\t\t\tinputStyle: {\n\t\t\t\t\t'height': '50px',\n\t\t\t\t\t'border-radius': '6px',\n\t\t\t\t\t'padding': '0 15px',\n\t\t\t\t\t'font-size': '16px',\n\t\t\t\t\t'background-color': '#F7F8FB',\n\t\t\t\t\t'box-sizing': 'border-box',\n\t\t\t\t},\n\t\t\t\tspliterStyle: {\n\t\t\t\t\t'background-color': '#FFFFFF',\n\t\t\t\t\t'height': '10px',\n\t\t\t\t},\n\t\t\t\tchoiceStyle: {\n\t\t\t\t\t'position': 'relative',\n\t\t\t\t\t'display': 'flex',\n\t\t\t\t\t'flex-direction': 'row',\n\t\t\t\t\t'justify-content': 'flex-start',\n\t\t\t\t\t'align-items': 'center',\n\t\t\t\t\t'height': '50px',\n\t\t\t\t\t'border-radius': '6px',\n\t\t\t\t\t'padding': '0 14px',\n\t\t\t\t\t'background-color': '#F7FAFB',\n\t\t\t\t\t'font-size': '16px'\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: mapState({\r\n\t\t\tself: state => state.userStore.self,\r\n\t\t\texamRecord() {\r\n\t\t\t\treturn this.$store.getters[EXAM_RECORD_GETTER_GET_ONE](this.examRecordId);\r\n\t\t\t},\r\n\t\t\texamRecordResult() {\r\n\t\t\t\tif (!this.examRecordResultId) { // 创建\n\t\t\t\t\treturn this.$store.getters[EXAM_RECORD_RESULT_GETTER_IN_PROGRESS_GET_ONE](this.examRecordId);\n\t\t\t\t} else { // 更新\n\t\t\t\t\tlet result = this.$store.getters[EXAM_RECORD_RESULT_GETTER_GET_ONE](this.examRecordResultId);\n\t\t\t\t\tif (result && result.examRecord) {\n\t\t\t\t\t\tthis.$store.commit(EXAM_RECORD_MUTATION_UPDATE_ONE, {item: result.examRecord});\n\t\t\t\t\t\tthis.examRecordId = result.examRecord._id;\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t}\r\n\t\t\t},\n\t\t\tisUpdating() {\n\t\t\t\treturn !!this.examRecordResultId;\n\t\t\t}\r\n\t\t}),\r\n\t\tasync onLoad(option) {\n\t\t\tthis.loading = true;\n\t\t\tuni.showLoading({\n\t\t\t    title: Strings.GLOBAL.LOADING\n\t\t\t});\n\t\t\t\r\n\t\t\tthis.examRecordId = option && option.examRecordId;\r\n\t\t\tthis.examRecordResultId = option && option.examRecordResultId;\n\t\t\t\t\t\t\n\t\t\tif (!this.self._id) await login(this);\n\t\t\t\n\t\t\t// 如果是创建新记录，初始化结果数据结构\n\t\t\tif(!this.examRecordResultId) {\n\t\t\t\tthis.$store.commit(EXAM_RECORD_RESULT_MUTATION_IN_PROGRESS_UPDATE_ONE, { \n\t\t\t\t\titem: { result: buildInitResult(this.examRecord), user: this.self, examRecord: this.examRecord }, \n\t\t\t\t\tkey: this.examRecordId,\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tuni.hideLoading();\n\t\t\tthis.loading = false;\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tuni.showShareMenu({\r\n\t\t\t\twithShareTicket: true,\r\n\t\t\t\tmenus: ['shareAppMessage', 'shareTimeline'],\r\n\t\t\t\ttitle: PAGES.EXAM_RECORD.title,\r\n\t\t\t\tpath: PAGES.EXAM_RECORD.path,\r\n\t\t\t\tcontent: PAGES.EXAM_RECORD.description,\r\n\t\t\t});\n\t\t\t\n\t\t\taddVisitSelf(this.examRecordResultId || this.examRecordId, PAGES.EXAM_RECORD_ADD.ref);\r\n\t\t},\r\n\t\tonShareAppMessage(res) {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: PAGES.EXAM_RECORD.title,\r\n\t\t\t\tpath: PAGES.EXAM_RECORD.path,\r\n\t\t\t\tcontent: PAGES.EXAM_RECORD.description,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync finish() {\n\t\t\t\tif(!this.validate()) return;\n\t\t\t\t\r\n\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tthis.loading = true;\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: Strings.GLOBAL.LOADING\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet result;\n\t\t\t\t\tconst payload = { ...this.examRecordResult };\n\t\t\t\t\tdelete payload.__typename;\n\t\t\t\t\tpayload.updatedAt = Date.now();\n\t\t\t\t\tpayload.examRecord = payload.examRecord._id;\n\t\t\t\t\tpayload.user = payload.user._id;\n\t\t\t\t\t\n\t\t\t\t\tif(this.isUpdating) {\n\t\t\t\t\t\tdelete payload._id;\n\t\t\t\t\t\tresult = await updateExamRecordResult(this.examRecordResult._id, payload);\n\t\t\t\t\t\tresult = result.data.updateExamRecordResult;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult = await addExamRecordResult(payload);\n\t\t\t\t\t\tresult = result.data.addExamRecordResult;\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (result._id) {\n\t\t\t\t\t\tconst item = { ...this.examRecordResult, _id: result._id };\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.$store.commit(EXAM_RECORD_RESULT_MUTATION_IN_PROGRESS_UPDATE_ONE, { item, key: this.examRecordId });\r\n\t\t\t\t\t\tthis.$store.commit(EXAM_RECORD_RESULT_MUTATION_UPDATE_ONE, { item, sortKey: 'recordedAt', desc: 1});\n\t\t\t\t\t\n\t\t\t\t\t\tthis.examRecordResultId = result._id; // 需要加在212行获取item和commit之后\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tconst _self = this;\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '添加成功', content: APP.SLOGAN,\n\t\t\t\t\t\t\tconfirmText: '查看结果', cancelText: '继续添加',\n\t\t\t\t\t\t\tsuccess: function (res) {\n\t\t\t\t\t\t\t\tif (_self.navigateFlag) return;\n\t\t\t\t\t\t\t\t_self.navigateFlag = true;\n\t\t\t\t\t\t\t\tif(res.confirm) {\n\t\t\t\t\t\t\t\t\tuni.navigateBack({ delta: 2 });\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tuni.navigateBack({ });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tuni.$emit('newExamRecordAdded');\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t_self.navigateFlag = false;\n\t\t\t\t\t\t\t\t}, 200);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t}\r\n\t\t\t},\n\t\t\tvalidate() {\n\t\t\t\tif(!this.examRecordResult.recordedAt) {\n\t\t\t\t\tthis.errorMessage = `请先输入检查日期。`;\n\t\t\t\t\tthis.$refs.errorPopup.open();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet isValid = true;\n\t\t\t\tconst _self = this;\n\t\t\t\tthis.examRecord.content.some(c => {\n\t\t\t\t\t\n\t\t\t\t\t// 验证必填项\n\t\t\t\t\tlet isPageValid = isQuestionPageResultValid(c, _self.examRecordResult.result);\n\t\t\t\t\t\n\t\t\t\t\tif(isPageValid && !isPageValid.isValid) {\n\t\t\t\t\t\tswitch(isPageValid.type) {\n\t\t\t\t\t\t\tcase VALIDATION_TYPE.REQUIRED:\n\t\t\t\t\t\t\t\tthis.errorMessage = `请先完善${isPageValid.question.title}对应的双眼数据，或将其清空。`\n\t\t\t\t\t\t\t\tthis.$refs.errorPopup.open();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase VALIDATION_TYPE.INPUT_TYPE:\n\t\t\t\t\t\t\t\tthis.errorMessage = `请选择数字作为${isPageValid.question.title}的输入类型。`\n\t\t\t\t\t\t\t\tthis.$refs.errorPopup.open();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase VALIDATION_TYPE.BOTH_EYE_EXISTING_OR_NULL:\n\t\t\t\t\t\t\t\tthis.errorMessage = `请确认已输入的${isPageValid.question.title}同时包含双眼，或将其清空。`\n\t\t\t\t\t\t\t\tthis.$refs.errorPopup.open();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tisValid = false\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\treturn isValid;\n\t\t\t},\r\n\t\t\tonMatrixdynamicChange(event, question) {\r\n\t\t\t\tconst { rowIndex, columnIndex, columnName, value } = event;\n\t\t\t\tconst result = Object.assign({}, this.examRecordResult.result);\n\t\t\t\tresult[question.name][rowIndex][columnName] = value;\n\t\t\t\tthis.updateData('result', result);\n\t\t\t},\n\t\t\tonTextChange(event, question) {\n\t\t\t\tconst result = Object.assign({}, this.examRecordResult.result);\n\t\t\t\tresult[question.name] = event.value;\n\t\t\t\tthis.updateData('result', result);\n\t\t\t},\r\n\t\t\tonDatePickerConfirm(event) {\n\t\t\t\tthis.showSaveButton = true;\n\t\t\t\tthis.updateData('recordedAt', Date.parse(event.fulldate));\r\n\t\t\t},\n\t\t\tonDatePickerOpen(e) {\n\t\t\t\tthis.showSaveButton = false;\n\t\t\t},\n\t\t\tonDatePickerClose(e) {\n\t\t\t\tthis.showSaveButton = true;\n\t\t\t},\n\t\t\tonNoteInput(e) {\n\t\t\t\tthis.updateData('note', e.detail.value);\n\t\t\t},\n\t\t\tscreenshotsChange(list) {\n\t\t\t\tthis.updateData('screenshots', list);\n\t\t\t},\n\t\t\tupdateData(key, value) {\t\t\t\t\n\t\t\t\tconst examRecordResult = Object.assign({}, this.examRecordResult);\n\t\t\t\texamRecordResult[key] = value;\n\t\t\t\t\n\t\t\t\tif(this.isUpdating) {\n\t\t\t\t\tthis.$store.commit(EXAM_RECORD_RESULT_MUTATION_UPDATE_ONE, { item: examRecordResult, sortKey: 'recordedAt', desc: 1});\n\t\t\t\t} else {\n\t\t\t\t\tthis.$store.commit(EXAM_RECORD_RESULT_MUTATION_IN_PROGRESS_UPDATE_ONE, { item: examRecordResult, key: this.examRecordId });\n\t\t\t\t}\n\t\t\t}\r\n\t\t} \r\n\t};\r\n</script>\r\n\r\n<style scoped>\n\t\r\n\t.root {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbox-sizing: border-box;\n\t\toverflow: auto;\n\t\tflex: 1;\n\t\tmin-height: 100%;\n\t\tposition: absolute;\n\t\twidth: 100%;\n\t\theight: auto;\r\n\t\tbackground-color: #f9fafb;\r\n\t\tpadding: 12px 10px 12px 10px;\n\t\tmargin-bottom: calc(66px + var(--safe-area-inset-bottom));\r\n\t}\n\t\n\t.form-container {\n\t\tdisplay: flex;\n\t\tflex: 1;\n\t\tflex-direction: column;\n\t\theight: 100%;\n\t\twidth: 100%;\n\t}\n\t\n\t.form {\n\t\tdisplay: flex;\n\t\tflex: 1;\n\t\tflex-direction: column;\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tposition: relative;\n\t}\r\n\r\n\t.date {\r\n\t\tmargin-bottom: 14px;\r\n\t}\n\t\n\t.page {\n\t\tmargin-bottom: 14px;\n\t\tbackground-color: #FFFFFF;\n\t\tpadding: 10px 15px 10px 15px;\n\t\tborder-radius: 8px;\n\t}\n\t\n\t.question {\n\t\tflex-direction: column;\n\t}\n\t\n\t.note {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbackground-color: #FFFFFF;\n\t\tpadding: 20rpx 30rpx 40rpx 30rpx;\n\t}\n\t\n\t.note-text {\n\t\tcolor: #2E2E2E;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 14rpx 0;\n\t\tfont-size: 32rpx;\n\t\tline-height: 38rpx;\n\t}\n\t\n\t.note-input {\n\t\tbackground-color: #F7F8FB;\n\t\theight: 200rpx;\n\t\tfont-size: 32rpx;\n\t\tline-height: 38rpx;\n\t\tpadding: 14rpx 20rpx;\n\t\twidth: auto;\n\t}\r\n\r\n\t.bottom-container {\r\n\t\tposition: fixed;\r\n\t\tdisplay: flex;\r\n\t\tbackground: #fff;\r\n\t\tpadding: 10px 18px 10px 18px;\n\t\t--safe-area-inset-bottom: env(safe-area-inset-bottom);\n\t\tpadding-bottom: calc(10px + var(--safe-area-inset-bottom));\n\t\tbottom: 0;\n\t\twidth: 100%;\r\n\t\tz-index: 99999;\n\t\tmargin: 0 -10px 0 -10px;\n\t\tbox-sizing: border-box;\r\n\t\tbox-shadow: 0 -1px 6px rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.button {\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t\tmargin: auto;\r\n\t\theight: 46px;\n\t\tjustify-content: center;\n\t\talign-items: center;\r\n\t\tbackground: #7ED395;\r\n\t\tcolor: #FFFFFF;\r\n\t\tborder-radius: 7px;\r\n\t\tfont-size: 16px;\n\t\tfont-weight: bold;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./exam-record-add.vue?vue&type=style&index=0&id=02d7bf40&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./exam-record-add.vue?vue&type=style&index=0&id=02d7bf40&scoped=true&lang=css&\""],"sourceRoot":""}